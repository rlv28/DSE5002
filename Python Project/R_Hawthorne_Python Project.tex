\documentclass[11pt]{article}

    \usepackage[breakable]{tcolorbox}
    \usepackage{parskip} % Stop auto-indenting (to mimic markdown behaviour)
    

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % Maintain compatibility with old templates. Remove in nbconvert 6.0
    \let\Oldincludegraphics\includegraphics
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionFormat{nocaption}{}
    \captionsetup{format=nocaption,aboveskip=0pt,belowskip=0pt}

    \usepackage{float}
    \floatplacement{figure}{H} % forces figures to be placed at the correct location
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro

    \usepackage{iftex}
    \ifPDFTeX
        \usepackage[T1]{fontenc}
        \IfFileExists{alphabeta.sty}{
              \usepackage{alphabeta}
          }{
              \usepackage[mathletters]{ucs}
              \usepackage[utf8x]{inputenc}
          }
    \else
        \usepackage{fontspec}
        \usepackage{unicode-math}
    \fi

    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics
                         % to support a larger range
    \makeatletter % fix for old versions of grffile with XeLaTeX
    \@ifpackagelater{grffile}{2019/11/01}
    {
      % Do nothing on new versions
    }
    {
      \def\Gread@@xetex#1{%
        \IfFileExists{"\Gin@base".bb}%
        {\Gread@eps{\Gin@base.bb}}%
        {\Gread@@xetex@aux#1}%
      }
    }
    \makeatother
    \usepackage[Export]{adjustbox} % Used to constrain images to a maximum size
    \adjustboxset{max size={0.9\linewidth}{0.9\paperheight}}

    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    % The default LaTeX title has an obnoxious amount of whitespace. By default,
    % titling removes some of it. It also provides customization options.
    \usepackage{titling}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage{array}     % table support for pandoc >= 2.11.3
    \usepackage{calc}      % table minipage width calculation for pandoc >= 2.11.1
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    \usepackage{mathrsfs}
    

    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}
    \definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
    \definecolor{ansi-default-inverse-bg}{HTML}{000000}

    % common color for the border for error outputs.
    \definecolor{outerrorbackground}{HTML}{FFDFDF}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}

    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}


    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatibility definitions
    \def\gt{>}
    \def\lt{<}
    \let\Oldtex\TeX
    \let\Oldlatex\LaTeX
    \renewcommand{\TeX}{\textrm{\Oldtex}}
    \renewcommand{\LaTeX}{\textrm{\Oldlatex}}
    % Document parameters
    % Document title
    \title{R\_Hawthorne\_Python Project}
    
    
    
    
    
% Pygments definitions
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\@namedef{PY@tok@w}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\@namedef{PY@tok@c}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cp}{\def\PY@tc##1{\textcolor[rgb]{0.61,0.40,0.00}{##1}}}
\@namedef{PY@tok@k}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kt}{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\@namedef{PY@tok@o}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ow}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@nb}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nf}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@ne}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.80,0.25,0.22}{##1}}}
\@namedef{PY@tok@nv}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@no}{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\@namedef{PY@tok@nl}{\def\PY@tc##1{\textcolor[rgb]{0.46,0.46,0.00}{##1}}}
\@namedef{PY@tok@ni}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
\@namedef{PY@tok@na}{\def\PY@tc##1{\textcolor[rgb]{0.41,0.47,0.13}{##1}}}
\@namedef{PY@tok@nt}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nd}{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@s}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sd}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@si}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
\@namedef{PY@tok@se}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.36,0.12}{##1}}}
\@namedef{PY@tok@sr}{\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
\@namedef{PY@tok@ss}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sx}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@m}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@gh}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@gu}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\@namedef{PY@tok@gd}{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\@namedef{PY@tok@gi}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.52,0.00}{##1}}}
\@namedef{PY@tok@gr}{\def\PY@tc##1{\textcolor[rgb]{0.89,0.00,0.00}{##1}}}
\@namedef{PY@tok@ge}{\let\PY@it=\textit}
\@namedef{PY@tok@gs}{\let\PY@bf=\textbf}
\@namedef{PY@tok@gp}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@go}{\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
\@namedef{PY@tok@gt}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\@namedef{PY@tok@err}{\def\PY@bc##1{{\setlength{\fboxsep}{\string -\fboxrule}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}}
\@namedef{PY@tok@kc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kd}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kr}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@bp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@fm}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@vc}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vg}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vi}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vm}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sa}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sb}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sc}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@dl}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s2}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sh}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s1}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@mb}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mf}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mh}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mi}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@il}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mo}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ch}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cm}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cpf}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@c1}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cs}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % For linebreaks inside Verbatim environment from package fancyvrb.
    \makeatletter
        \newbox\Wrappedcontinuationbox
        \newbox\Wrappedvisiblespacebox
        \newcommand*\Wrappedvisiblespace {\textcolor{red}{\textvisiblespace}}
        \newcommand*\Wrappedcontinuationsymbol {\textcolor{red}{\llap{\tiny$\m@th\hookrightarrow$}}}
        \newcommand*\Wrappedcontinuationindent {3ex }
        \newcommand*\Wrappedafterbreak {\kern\Wrappedcontinuationindent\copy\Wrappedcontinuationbox}
        % Take advantage of the already applied Pygments mark-up to insert
        % potential linebreaks for TeX processing.
        %        {, <, #, %, $, ' and ": go to next line.
        %        _, }, ^, &, >, - and ~: stay at end of broken line.
        % Use of \textquotesingle for straight quote.
        \newcommand*\Wrappedbreaksatspecials {%
            \def\PYGZus{\discretionary{\char`\_}{\Wrappedafterbreak}{\char`\_}}%
            \def\PYGZob{\discretionary{}{\Wrappedafterbreak\char`\{}{\char`\{}}%
            \def\PYGZcb{\discretionary{\char`\}}{\Wrappedafterbreak}{\char`\}}}%
            \def\PYGZca{\discretionary{\char`\^}{\Wrappedafterbreak}{\char`\^}}%
            \def\PYGZam{\discretionary{\char`\&}{\Wrappedafterbreak}{\char`\&}}%
            \def\PYGZlt{\discretionary{}{\Wrappedafterbreak\char`\<}{\char`\<}}%
            \def\PYGZgt{\discretionary{\char`\>}{\Wrappedafterbreak}{\char`\>}}%
            \def\PYGZsh{\discretionary{}{\Wrappedafterbreak\char`\#}{\char`\#}}%
            \def\PYGZpc{\discretionary{}{\Wrappedafterbreak\char`\%}{\char`\%}}%
            \def\PYGZdl{\discretionary{}{\Wrappedafterbreak\char`\$}{\char`\$}}%
            \def\PYGZhy{\discretionary{\char`\-}{\Wrappedafterbreak}{\char`\-}}%
            \def\PYGZsq{\discretionary{}{\Wrappedafterbreak\textquotesingle}{\textquotesingle}}%
            \def\PYGZdq{\discretionary{}{\Wrappedafterbreak\char`\"}{\char`\"}}%
            \def\PYGZti{\discretionary{\char`\~}{\Wrappedafterbreak}{\char`\~}}%
        }
        % Some characters . , ; ? ! / are not pygmentized.
        % This macro makes them "active" and they will insert potential linebreaks
        \newcommand*\Wrappedbreaksatpunct {%
            \lccode`\~`\.\lowercase{\def~}{\discretionary{\hbox{\char`\.}}{\Wrappedafterbreak}{\hbox{\char`\.}}}%
            \lccode`\~`\,\lowercase{\def~}{\discretionary{\hbox{\char`\,}}{\Wrappedafterbreak}{\hbox{\char`\,}}}%
            \lccode`\~`\;\lowercase{\def~}{\discretionary{\hbox{\char`\;}}{\Wrappedafterbreak}{\hbox{\char`\;}}}%
            \lccode`\~`\:\lowercase{\def~}{\discretionary{\hbox{\char`\:}}{\Wrappedafterbreak}{\hbox{\char`\:}}}%
            \lccode`\~`\?\lowercase{\def~}{\discretionary{\hbox{\char`\?}}{\Wrappedafterbreak}{\hbox{\char`\?}}}%
            \lccode`\~`\!\lowercase{\def~}{\discretionary{\hbox{\char`\!}}{\Wrappedafterbreak}{\hbox{\char`\!}}}%
            \lccode`\~`\/\lowercase{\def~}{\discretionary{\hbox{\char`\/}}{\Wrappedafterbreak}{\hbox{\char`\/}}}%
            \catcode`\.\active
            \catcode`\,\active
            \catcode`\;\active
            \catcode`\:\active
            \catcode`\?\active
            \catcode`\!\active
            \catcode`\/\active
            \lccode`\~`\~
        }
    \makeatother

    \let\OriginalVerbatim=\Verbatim
    \makeatletter
    \renewcommand{\Verbatim}[1][1]{%
        %\parskip\z@skip
        \sbox\Wrappedcontinuationbox {\Wrappedcontinuationsymbol}%
        \sbox\Wrappedvisiblespacebox {\FV@SetupFont\Wrappedvisiblespace}%
        \def\FancyVerbFormatLine ##1{\hsize\linewidth
            \vtop{\raggedright\hyphenpenalty\z@\exhyphenpenalty\z@
                \doublehyphendemerits\z@\finalhyphendemerits\z@
                \strut ##1\strut}%
        }%
        % If the linebreak is at a space, the latter will be displayed as visible
        % space at end of first line, and a continuation symbol starts next line.
        % Stretch/shrink are however usually zero for typewriter font.
        \def\FV@Space {%
            \nobreak\hskip\z@ plus\fontdimen3\font minus\fontdimen4\font
            \discretionary{\copy\Wrappedvisiblespacebox}{\Wrappedafterbreak}
            {\kern\fontdimen2\font}%
        }%

        % Allow breaks at special characters using \PYG... macros.
        \Wrappedbreaksatspecials
        % Breaks at punctuation characters . , ; ? ! and / need catcode=\active
        \OriginalVerbatim[#1,codes*=\Wrappedbreaksatpunct]%
    }
    \makeatother

    % Exact colors from NB
    \definecolor{incolor}{HTML}{303F9F}
    \definecolor{outcolor}{HTML}{D84315}
    \definecolor{cellborder}{HTML}{CFCFCF}
    \definecolor{cellbackground}{HTML}{F7F7F7}

    % prompt
    \makeatletter
    \newcommand{\boxspacing}{\kern\kvtcb@left@rule\kern\kvtcb@boxsep}
    \makeatother
    \newcommand{\prompt}[4]{
        {\ttfamily\llap{{\color{#2}[#3]:\hspace{3pt}#4}}\vspace{-\baselineskip}}
    }
    

    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

\begin{document}
    
    \maketitle
    
    

    
    Read in libraries

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{3}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{openpyxl}
\PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
\PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
\PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
\PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
\PY{k+kn}{import} \PY{n+nn}{re}
\PY{k+kn}{import} \PY{n+nn}{requests}
\end{Verbatim}
\end{tcolorbox}

    Functions that I made/found/edited to make my life easier

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{4}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{stats\PYZus{}df\PYZus{}creator} \PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{grouping}\PY{p}{,} \PY{n}{column}\PY{p}{)}\PY{p}{:}
\PY{+w}{    }\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{l+s+sd}{    Parameters}
\PY{l+s+sd}{    \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}}
\PY{l+s+sd}{    df : dataframe of data}
\PY{l+s+sd}{    grouping : column to group by}
\PY{l+s+sd}{    column : column we want stats on}
\PY{l+s+sd}{    Returns df with mean, median and third quantile values for column}
\PY{l+s+sd}{    \PYZsq{}\PYZsq{}\PYZsq{}}
    \PY{n}{stats\PYZus{}df} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{n}{grouping}\PY{p}{]}\PY{p}{)}\PY{o}{.}\PY{n}{agg}\PY{p}{(}
        \PY{n}{median}\PY{o}{=}\PY{p}{(}\PY{n}{column} \PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{median}\PY{p}{)}\PY{p}{,}
        \PY{n}{mean} \PY{o}{=} \PY{p}{(}\PY{n}{column}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{)}\PY{p}{,}
        \PY{n}{third\PYZus{}quantile} \PY{o}{=} \PY{p}{(} \PY{n}{column}\PY{p}{,} \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{percentile}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{q}\PY{o}{=}\PY{l+m+mi}{75}\PY{p}{)}\PY{p}{)}       
        \PY{p}{)}
    \PY{k}{return} \PY{n}{stats\PYZus{}df}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{5}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{print\PYZus{}countries}\PY{p}{(}\PY{n}{index\PYZus{}phrase}\PY{p}{,} \PY{n}{df}\PY{p}{)}\PY{p}{:}
\PY{+w}{    }\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{l+s+sd}{    Parameters}
\PY{l+s+sd}{    \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}}
\PY{l+s+sd}{    index\PYZus{}phrase : phrase decribing the current index that I am printing}
\PY{l+s+sd}{    df : df that top 5 countries of that index are in}
\PY{l+s+sd}{    prints the countries for the top 5 scaled index}
\PY{l+s+sd}{    \PYZsq{}\PYZsq{}\PYZsq{}}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{The 5 countries in which salary goes the farthest on the }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{index\PYZus{}phrase}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ index are:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{country\PYZus{}code} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
        \PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n}{country\PYZus{}code\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n}{country\PYZus{}code} \PY{o}{==} \PY{n}{value}\PY{p}{:}
                \PY{n+nb}{print}\PY{p}{(}\PY{n}{key}\PY{p}{)}
    \PY{k}{return}
    
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{19}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{convert\PYZus{}currency}\PY{p}{(}\PY{n}{amount}\PY{p}{,} \PY{n}{from\PYZus{}currency}\PY{p}{)}\PY{p}{:}
\PY{+w}{    }\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{l+s+sd}{    Parameters}
\PY{l+s+sd}{    \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}}
\PY{l+s+sd}{    amount : amount of money to be converted}
\PY{l+s+sd}{    from\PYZus{}currency: currency to be converted from}
\PY{l+s+sd}{    Returns currency is USD}
\PY{l+s+sd}{    \PYZsq{}\PYZsq{}\PYZsq{}}
    \PY{n}{response} \PY{o}{=} \PY{n}{requests}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{https://v6.exchangerate\PYZhy{}api.com/v6/45ab531ce52b1a50df0c239b/latest/USD}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
    \PY{n}{data} \PY{o}{=} \PY{n}{response}\PY{o}{.}\PY{n}{json}\PY{p}{(}\PY{p}{)}

    \PY{k}{if} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{conversion\PYZus{}rates}\PY{l+s+s1}{\PYZsq{}} \PY{o+ow}{in} \PY{n}{data}\PY{p}{:}
        \PY{n}{rates} \PY{o}{=} \PY{n}{data}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{conversion\PYZus{}rates}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{k}{if} \PY{n}{from\PYZus{}currency} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
            \PY{k}{return} \PY{n}{amount}

        \PY{k}{if} \PY{n}{from\PYZus{}currency} \PY{o+ow}{in} \PY{n}{rates} \PY{p}{:}
            \PY{n}{converted\PYZus{}amount} \PY{o}{=} \PY{n}{amount} \PY{o}{/} \PY{n}{rates}\PY{p}{[}\PY{n}{from\PYZus{}currency}\PY{p}{]}
            \PY{k}{return} \PY{n}{converted\PYZus{}amount}
        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{ValueError}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Invalid currency!}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
    \PY{k}{else}\PY{p}{:}
        \PY{k}{raise} \PY{n+ne}{ValueError}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Unable to fetch exchange rates!}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
    \PY{k}{return}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{7}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{print\PYZus{}cities}\PY{p}{(}\PY{n}{index\PYZus{}phrase}\PY{p}{,} \PY{n}{df}\PY{p}{)}\PY{p}{:}
\PY{+w}{    }\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{l+s+sd}{    Parameters}
\PY{l+s+sd}{    \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}}
\PY{l+s+sd}{    index\PYZus{}phrase : phrase decribing the current index that I am printing}
\PY{l+s+sd}{    df : df that top 5 citiess of that index are in}
\PY{l+s+sd}{    prints the cities for the top 5 scaled index}
\PY{l+s+sd}{    \PYZsq{}\PYZsq{}\PYZsq{}}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{The 5 cities in which salary goes the farthest on the }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{index\PYZus{}phrase}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ index are:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    \PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{city} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{city}\PY{p}{)}
    \PY{k}{return}
\end{Verbatim}
\end{tcolorbox}

    Read in all the data files, including the currency codes I got from
https://www.exchangerate-api.com/docs/supported-currencies .

Then remove parenthesis from the country codes df.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{8}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{country\PYZus{}codes\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}excel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country\PYZus{}codes.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{engine}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{openpyxl}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{ds\PYZus{}salaries\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ds\PYZus{}salaries.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Levels\PYZus{}Fyi\PYZus{}Salary\PYZus{}Data.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{currency\PYZus{}codes} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{currency\PYZus{}codes.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{c+c1}{\PYZsh{}removning the () from the country names}
\PY{n}{country\PYZus{}codes\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{country\PYZus{}codes\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{str}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{(.*}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}2988162007.py:8:
FutureWarning: The default value of regex will change from True to False in a
future version.
  country\_codes\_df['Country'] =
country\_codes\_df['Country'].str.replace('\textbackslash{}(.*\textbackslash{})','')
    \end{Verbatim}

    Convert currency codes df and country codes to dictionaries to be used
later.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{9}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{collections} \PY{k+kn}{import} \PY{n}{defaultdict}
\PY{c+c1}{\PYZsh{} Function to return a default}
\PY{c+c1}{\PYZsh{} values for keys that is not}
\PY{c+c1}{\PYZsh{} present}
\PY{k}{def} \PY{n+nf}{def\PYZus{}value}\PY{p}{(}\PY{p}{)}\PY{p}{:}
    \PY{k}{return} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Not Present}\PY{l+s+s2}{\PYZdq{}}

\PY{n}{country\PYZus{}code\PYZus{}dict} \PY{o}{=} \PY{n}{defaultdict}\PY{p}{(}\PY{n}{def\PYZus{}value}\PY{p}{,} \PY{n+nb}{zip}\PY{p}{(}\PY{n}{country\PYZus{}codes\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{country\PYZus{}codes\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Alpha\PYZhy{}2 code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}

\PY{n}{currency\PYZus{}codes\PYZus{}dict}\PY{o}{=} \PY{n}{defaultdict}\PY{p}{(}\PY{n}{def\PYZus{}value}\PY{p}{,} \PY{n+nb}{zip}\PY{p}{(}\PY{n}{currency\PYZus{}codes}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{currency\PYZus{}codes}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Currency Code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    Start editing salary data:

Get just data science salaries for entry level (less then 4 years of
expereince), fulltime employes from Levels\_fyi\_slary\_data\_df and
ds\_salaries\_df

Then return columns with salary date, location, and salary

Reindex

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{10}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df} \PY{o}{=} \PY{n}{levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{(}\PY{n}{levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{title}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{==}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Data Scientist}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                              \PY{o}{\PYZam{}}\PY{p}{(}\PY{n}{levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{yearsofexperience}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{\PYZlt{}} \PY{l+m+mi}{4}\PY{p}{)}\PY{p}{,}
                              \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timestamp}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{totalyearlycompensation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{location}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}



\PY{n}{data\PYZus{}science\PYZus{}ds\PYZus{}salaries\PYZus{}df} \PY{o}{=} \PY{n}{ds\PYZus{}salaries\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{(}\PY{n}{ds\PYZus{}salaries\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{job\PYZus{}title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Data Scientist}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
                   \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{ds\PYZus{}salaries\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employment\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FT}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
                   \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{ds\PYZus{}salaries\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{experience\PYZus{}level}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{,} 
                   \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{work\PYZus{}year}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}usd}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}

\PY{n}{data\PYZus{}science\PYZus{}ds\PYZus{}salaries\PYZus{}df} \PY{o}{=} \PY{n}{data\PYZus{}science\PYZus{}ds\PYZus{}salaries\PYZus{}df}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{drop}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}

\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df} \PY{o}{=} \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{drop}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}ds\PYZus{}salaries\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
            timestamp  totalyearlycompensation           location
0  6/17/2018 19:02:50                   200000        Seattle, WA
1  6/21/2018 10:54:35                   600000      Los Gatos, CA
2  8/15/2018 11:57:44                   120000     Washington, DC
3  8/15/2018 15:38:02                   220000        Redmond, WA
4  8/15/2018 20:38:36                   147000  San Francisco, CA
   work\_year  salary\_in\_usd employee\_residence
0       2020          51321                 FR
1       2020          39916                 FR
2       2020          62726                 DE
3       2020          49268                 DE
4       2020         105000                 US
    \end{Verbatim}

    cleaning data: For data\_science\_levels\_fyi\_salary\_data\_df Create
work\_year column

\begin{verbatim}
Break location into city, state and country; then add country code    
\end{verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{11}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{o}{.}\PY{n}{dtypes}

\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{work\PYZus{}year}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timestamp}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{p}{,} \PY{n+nb}{format}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{m/}\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{/}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{Y }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{H:}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{M:}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{S}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{year}

\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{city}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{location}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{str}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{, }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{expand}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}

 
\PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}add country for those locations that only had city and state}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate} \PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}  
    \PY{k}{if} \PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{value}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{2}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{==} \PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
        \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{United States}\PY{l+s+s1}{\PYZsq{}}
    \PY{k}{elif} \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{==} \PY{k+kc}{None}\PY{p}{:}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{idx}\PY{p}{)}
    
\PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}only printed index of 161 which correlates to Israel}
\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{161}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Israel}\PY{l+s+s1}{\PYZsq{}} 

\PY{n+nb}{print}\PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3070310417.py:12:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['country'][idx] = 'United States'
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
161
            timestamp  totalyearlycompensation           location  work\_year  \textbackslash{}
0  6/17/2018 19:02:50                   200000        Seattle, WA       2018
1  6/21/2018 10:54:35                   600000      Los Gatos, CA       2018
2  8/15/2018 11:57:44                   120000     Washington, DC       2018
3  8/15/2018 15:38:02                   220000        Redmond, WA       2018
4  8/15/2018 20:38:36                   147000  San Francisco, CA       2018

            city state        country
0        Seattle    WA  United States
1      Los Gatos    CA  United States
2     Washington    DC  United States
3        Redmond    WA  United States
4  San Francisco    CA  United States
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3070310417.py:17:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['country'][161] = 'Israel'
    \end{Verbatim}

    Add currency code for currency conversion from the currency code
dictionary.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{12}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{currency\PYZus{}code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate} \PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{currency\PYZus{}code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n}{val} \PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{val} \PY{o+ow}{in} \PY{n}{currency\PYZus{}codes\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)} \PY{k}{if} \PY{n}{re}\PY{o}{.}\PY{n}{search}\PY{p}{(}\PY{n}{value}\PY{p}{,} \PY{n}{key}\PY{p}{)}\PY{p}{]}
    \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n}{val} \PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{val} \PY{o+ow}{in} \PY{n}{country\PYZus{}code\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)} \PY{k}{if} \PY{n}{value} \PY{o+ow}{in} \PY{n}{key}\PY{p}{]}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3301572926.py:5:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['currency\_code'][idx] = [val for key,
val in currency\_codes\_dict.items() if re.search(value, key)]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3301572926.py:6:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['employee\_residence'][idx] = [val for
key, val in country\_code\_dict.items() if value in key]
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
            timestamp  totalyearlycompensation           location  work\_year  \textbackslash{}
0  6/17/2018 19:02:50                   200000        Seattle, WA       2018
1  6/21/2018 10:54:35                   600000      Los Gatos, CA       2018
2  8/15/2018 11:57:44                   120000     Washington, DC       2018
3  8/15/2018 15:38:02                   220000        Redmond, WA       2018
4  8/15/2018 20:38:36                   147000  San Francisco, CA       2018

            city state        country currency\_code employee\_residence
0        Seattle    WA  United States         [USD]           [UM, US]
1      Los Gatos    CA  United States         [USD]           [UM, US]
2     Washington    DC  United States         [USD]           [UM, US]
3        Redmond    WA  United States         [USD]           [UM, US]
4  San Francisco    CA  United States         [USD]           [UM, US]
    \end{Verbatim}

    I don't know why Hong Kong won't work so I fixed that here. Also fixed
countries that got two codes

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{13}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate} \PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hong Kong (SAR)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
        \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{currency\PYZus{}code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{HKD}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
        \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{HK}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate} \PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{United States}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}
        \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{US}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{India}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}
        \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{IN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Ireland}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}
        \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{IE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

        
\PY{n+nb}{print}\PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
            timestamp  totalyearlycompensation           location  work\_year  \textbackslash{}
0  6/17/2018 19:02:50                   200000        Seattle, WA       2018
1  6/21/2018 10:54:35                   600000      Los Gatos, CA       2018
2  8/15/2018 11:57:44                   120000     Washington, DC       2018
3  8/15/2018 15:38:02                   220000        Redmond, WA       2018
4  8/15/2018 20:38:36                   147000  San Francisco, CA       2018

            city state        country currency\_code employee\_residence
0        Seattle    WA  United States         [USD]               [US]
1      Los Gatos    CA  United States         [USD]               [US]
2     Washington    DC  United States         [USD]               [US]
3        Redmond    WA  United States         [USD]               [US]
4  San Francisco    CA  United States         [USD]               [US]
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}1514313522.py:3:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['currency\_code'][idx] = ["HKD"]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}1514313522.py:4:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['employee\_residence'][idx] = ['HK']
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}1514313522.py:8:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['employee\_residence'][idx] = ['US']
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}1514313522.py:10:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['employee\_residence'][idx] = ['IN']
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}1514313522.py:12:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['employee\_residence'][idx] = ['IE']
    \end{Verbatim}

    Convert all currancey to US currency

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{20}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}usd}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}


\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate} \PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{totalyearlycompensation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:} 
    \PY{k}{if} \PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{currency\PYZus{}code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{!=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{USD}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
        \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}usd}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{convert\PYZus{}currency}\PY{p}{(}\PY{n}{value}\PY{p}{,} \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{currency\PYZus{}code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{p}{)}
    \PY{k}{else}\PY{p}{:}
        \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}usd}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{o}{=}\PY{n}{value}  

        
\PY{n+nb}{print}\PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3728537373.py:8:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['salary\_in\_usd'][idx]=value
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3728537373.py:6:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df['salary\_in\_usd'][idx] =
convert\_currency(value,
data\_science\_levels\_fyi\_salary\_data\_df['currency\_code'][idx][0] )
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
            timestamp  totalyearlycompensation           location  work\_year  \textbackslash{}
0  6/17/2018 19:02:50                   200000        Seattle, WA       2018
1  6/21/2018 10:54:35                   600000      Los Gatos, CA       2018
2  8/15/2018 11:57:44                   120000     Washington, DC       2018
3  8/15/2018 15:38:02                   220000        Redmond, WA       2018
4  8/15/2018 20:38:36                   147000  San Francisco, CA       2018

            city state        country currency\_code employee\_residence  \textbackslash{}
0        Seattle    WA  United States         [USD]               [US]
1      Los Gatos    CA  United States         [USD]               [US]
2     Washington    DC  United States         [USD]               [US]
3        Redmond    WA  United States         [USD]               [US]
4  San Francisco    CA  United States         [USD]               [US]

  salary\_in\_usd
0        200000
1        600000
2        120000
3        220000
4        147000
    \end{Verbatim}

    Make copies to merge without extra columns and then merge

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{21}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df\PYZus{}merge} \PY{o}{=} \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{timestamp}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{totalyearlycompensation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{location}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{currency\PYZus{}code}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df\PYZus{}merge}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df\PYZus{}merge}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{o}{=} \PY{n}{value}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
    

\PY{n}{salary\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{data\PYZus{}science\PYZus{}levels\PYZus{}fyi\PYZus{}salary\PYZus{}data\PYZus{}df\PYZus{}merge}\PY{p}{,} \PY{n}{data\PYZus{}science\PYZus{}ds\PYZus{}salaries\PYZus{}df}\PY{p}{,} \PY{n}{how} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{salary\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
   work\_year          city state        country employee\_residence  \textbackslash{}
0       2018       Seattle    WA  United States                 US
1       2018     Los Gatos    CA  United States                 US
2       2018    Washington    DC  United States                 US
3       2018  Santa Monica    CA  United States                 US
4       2018       Redmond    WA  United States                 US

  salary\_in\_usd
0      200000.0
1      600000.0
2      120000.0
3      120000.0
4      220000.0
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}1026206038.py:4:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  data\_science\_levels\_fyi\_salary\_data\_df\_merge['employee\_residence'][idx]=
value[0]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}1026206038.py:7:
FutureWarning: In a future version, the Index constructor will not infer numeric
dtypes when passed object-dtype sequences (matching Series behavior)
  salary\_df = pd.merge(data\_science\_levels\_fyi\_salary\_data\_df\_merge,
data\_science\_ds\_salaries\_df, how = 'outer')
    \end{Verbatim}

    Change money to 2023 dollars using SSA AWI values. Increase from: 2018
to 2019: 3.75\% 2019 to 2021: 2.83\% 2020 to 2021: 8.89\% 2021 to 2022:
4.8\% 2022 to 2023: 4.2\% source:
https://www.ssa.gov/oact/TR/TRassum.html and
https://www.ssa.gov/oact/cola/awidevelop.html

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{22}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{work\PYZus{}year}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+m+mi}{2018}\PY{p}{:}
        \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}usd}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{o}{*}\PY{l+m+mf}{1.0375}\PY{o}{*}\PY{l+m+mf}{1.0283}\PY{o}{*}\PY{l+m+mf}{1.089}\PY{o}{*}\PY{l+m+mf}{1.048}\PY{o}{*}\PY{l+m+mf}{1.042}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+m+mi}{2019}\PY{p}{:}
        \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}usd}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{o}{*}\PY{l+m+mf}{1.0283}\PY{o}{*}\PY{l+m+mf}{1.089}\PY{o}{*}\PY{l+m+mf}{1.048}\PY{o}{*}\PY{l+m+mf}{1.042}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+m+mi}{2020}\PY{p}{:}
        \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}usd}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{o}{*}\PY{l+m+mf}{1.089}\PY{o}{*}\PY{l+m+mf}{1.048}\PY{o}{*}\PY{l+m+mf}{1.042}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+m+mi}{2021}\PY{p}{:}
        \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}usd}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{o}{*}\PY{l+m+mf}{1.048}\PY{o}{*}\PY{l+m+mf}{1.042}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+m+mi}{2022}\PY{p}{:}
        \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}usd}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{o}{*}\PY{l+m+mf}{1.042}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{salary\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
   work\_year          city state        country employee\_residence  \textbackslash{}
0       2018       Seattle    WA  United States                 US
1       2018     Los Gatos    CA  United States                 US
2       2018    Washington    DC  United States                 US
3       2018  Santa Monica    CA  United States                 US
4       2018       Redmond    WA  United States                 US

  salary\_in\_usd salary\_in\_2023
0      200000.0  253743.437031
1      600000.0  761230.311093
2      120000.0  152246.062219
3      120000.0  152246.062219
4      220000.0  279117.780734
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}49291514.py:5:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_df['salary\_in\_2023'][idx] =
salary\_df['salary\_in\_usd'][idx]*1.0375*1.0283*1.089*1.048*1.042
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}49291514.py:7:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_df['salary\_in\_2023'][idx] =
salary\_df['salary\_in\_usd'][idx]*1.0283*1.089*1.048*1.042
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}49291514.py:9:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_df['salary\_in\_2023'][idx] =
salary\_df['salary\_in\_usd'][idx]*1.089*1.048*1.042
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}49291514.py:11:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_df['salary\_in\_2023'][idx] = salary\_df['salary\_in\_usd'][idx]*1.048*1.042
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}49291514.py:13:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_df['salary\_in\_2023'][idx] = salary\_df['salary\_in\_usd'][idx]*1.042
    \end{Verbatim}

    Manipulating cost of living data. Sense we don't have data for most
cities outside the US, I am planning to look at all data overall grouped
by country. Then look more specifically at the US.

To do this I first am breaking apart the ``City'' column in the cost of
living data into city, state and country.

2-digit country codes are then added to align with the salary data.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{23}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{city}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{City}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{str}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{, }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{expand}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}


\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate} \PY{p}{(}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}  
    \PY{k}{if} \PY{p}{(}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{==} \PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
        \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate} \PY{p}{(}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:} 
    \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n}{val} \PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{val} \PY{o+ow}{in} \PY{n}{country\PYZus{}code\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)} \PY{k}{if} \PY{n}{value} \PY{o+ow}{in} \PY{n}{key}\PY{p}{]}

    
\PY{c+c1}{\PYZsh{}the following pulled two keys from the dictionary}
\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate} \PY{p}{(}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{United States}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}
        \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{US}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{India}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}
        \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{IN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Ireland}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}
        \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{IE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
    \PY{k}{if} \PY{n}{value} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Georgia}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}
        \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
   Rank                 City  Cost of Living Index  Rent Index  \textbackslash{}
0   NaN    Hamilton, Bermuda                149.02       96.10
1   NaN  Zurich, Switzerland                131.24       69.26
2   NaN   Basel, Switzerland                130.93       49.38
3   NaN     Zug, Switzerland                128.13       72.12
4   NaN  Lugano, Switzerland                123.99       44.99

   Cost of Living Plus Rent Index  Groceries Index  Restaurant Price Index  \textbackslash{}
0                          124.22           157.89                  155.22
1                          102.19           136.14                  132.52
2                           92.70           137.07                  130.95
3                          101.87           132.61                  130.93
4                           86.96           129.17                  119.80

   Local Purchasing Power Index      city        state      country  \textbackslash{}
0                         79.43  Hamilton      Bermuda      Bermuda
1                        129.79    Zurich  Switzerland  Switzerland
2                        111.53     Basel  Switzerland  Switzerland
3                        143.40       Zug  Switzerland  Switzerland
4                        111.96    Lugano  Switzerland  Switzerland

  employee\_residence
0               [BM]
1               [CH]
2               [CH]
3               [CH]
4               [CH]
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3238637228.py:7:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  cost\_of\_living\_df['country'][idx] = cost\_of\_living\_df['state'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3238637228.py:10:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  cost\_of\_living\_df['employee\_residence'][idx] = [val for key, val in
country\_code\_dict.items() if value in key]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3238637228.py:16:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  cost\_of\_living\_df['employee\_residence'][idx] = ['US']
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3238637228.py:20:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  cost\_of\_living\_df['employee\_residence'][idx] = ['IE']
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3238637228.py:18:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  cost\_of\_living\_df['employee\_residence'][idx] = ['IN']
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3238637228.py:22:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  cost\_of\_living\_df['employee\_residence'][idx] = ['GE']
    \end{Verbatim}

    replace unknown country code with none.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{24}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{k}{if} \PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:}
        \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{o}{=} \PY{n}{value}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
    \PY{k}{else}\PY{p}{:}
        \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{k+kc}{None}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}73360534.py:3:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  cost\_of\_living\_df['employee\_residence'][idx]= value[0]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}73360534.py:5:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  cost\_of\_living\_df['employee\_residence'][idx] = None
    \end{Verbatim}

    get stats for each of the five indexes

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{25}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{stat\PYZus{}for\PYZus{}cost\PYZus{}of\PYZus{}living} \PY{o}{=} \PY{n}{stats\PYZus{}df\PYZus{}creator}\PY{p}{(} \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{,} 
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n}{stat\PYZus{}for\PYZus{}rent\PYZus{}index} \PY{o}{=} \PY{n}{stats\PYZus{}df\PYZus{}creator}\PY{p}{(} \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{,} 
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{stat\PYZus{}for\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index} \PY{o}{=} \PY{n}{stats\PYZus{}df\PYZus{}creator}\PY{p}{(} \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{,} 
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Plus Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{stat\PYZus{}for\PYZus{}groceries\PYZus{}index} \PY{o}{=} \PY{n}{stats\PYZus{}df\PYZus{}creator}\PY{p}{(} \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{,} 
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{stat\PYZus{}for\PYZus{}restaurant\PYZus{}price\PYZus{}index} \PY{o}{=} \PY{n}{stats\PYZus{}df\PYZus{}creator}\PY{p}{(} \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{,} 
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{stat\PYZus{}for\PYZus{}cost\PYZus{}of\PYZus{}living}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{stat\PYZus{}for\PYZus{}rent\PYZus{}index}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{stat\PYZus{}for\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{stat\PYZus{}for\PYZus{}groceries\PYZus{}index}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{stat\PYZus{}for\PYZus{}restaurant\PYZus{}price\PYZus{}index}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                    median    mean  third\_quantile
employee\_residence
AE                  55.235  55.955         59.4975
AF                  21.350  21.350         21.3500
AL                  38.680  38.680         38.6800
AM                  34.010  34.010         34.0100
AR                  35.250  35.250         35.2500
                    median     mean  third\_quantile
employee\_residence
AE                  49.045  54.4525         63.4575
AF                   3.170   3.1700          3.1700
AL                  11.330  11.3300         11.3300
AM                  11.890  11.8900         11.8900
AR                  10.730  10.7300         10.7300
                    median   mean  third\_quantile
employee\_residence
AE                  53.095  55.25           59.57
AF                  12.830  12.83           12.83
AL                  25.860  25.86           25.86
AM                  23.640  23.64           23.64
AR                  23.750  23.75           23.75
                    median     mean  third\_quantile
employee\_residence
AE                  44.625  44.3725         48.6275
AF                  15.220  15.2200         15.2200
AL                  30.990  30.9900         30.9900
AM                  27.810  27.8100         27.8100
AR                  28.540  28.5400         28.5400
                    median     mean  third\_quantile
employee\_residence
AE                   59.03  56.3875         62.3525
AF                   14.85  14.8500         14.8500
AL                   29.86  29.8600         29.8600
AM                   31.01  31.0100         31.0100
AR                   34.35  34.3500         34.3500
    \end{Verbatim}

    I reviewed all the stats above and found that the values were very close
to eachother for all three statistics. This implies a very low spread.
I've decided to focus on the median as the measure to use for the
indices

To that end the next step is to create a df of just these stats then
turn it into a dictionary.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{26}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df} \PY{o}{=} \PY{n}{stat\PYZus{}for\PYZus{}cost\PYZus{}of\PYZus{}living}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{third\PYZus{}quantile}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df} \PY{o}{=} \PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{o}{.}\PY{n}{rename}\PY{p}{(}\PY{n}{columns}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{median}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{cost\PYZus{}of\PYZus{}living}\PY{l+s+s2}{\PYZdq{}}\PY{p}{\PYZcb{}}\PY{p}{)}
\PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{stat\PYZus{}for\PYZus{}rent\PYZus{}index}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{stat\PYZus{}for\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{stat\PYZus{}for\PYZus{}groceries\PYZus{}index}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{stat\PYZus{}for\PYZus{}restaurant\PYZus{}price\PYZus{}index}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}

\PY{n}{index\PYZus{}dict} \PY{o}{=}  \PY{n}{defaultdict}\PY{p}{(}\PY{n}{def\PYZus{}value}\PY{p}{,}   \PY{p}{[}\PY{p}{(}\PY{n}{i}\PY{p}{,}\PY{p}{[}\PY{n}{v}\PY{p}{,}\PY{n}{w}\PY{p}{,}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{n}{z} \PY{p}{]}\PY{p}{)} 
                                        \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{v}\PY{p}{,}\PY{n}{w}\PY{p}{,}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{n}{z} 
                                        \PY{o+ow}{in} \PY{n+nb}{zip}\PY{p}{(}\PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{o}{.}\PY{n}{employee\PYZus{}residence}\PY{p}{,} 
                                                                \PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{o}{.}\PY{n}{cost\PYZus{}of\PYZus{}living}\PY{p}{,} 
                                                                \PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{o}{.}\PY{n}{rent\PYZus{}index}\PY{p}{,}
                                                                \PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{o}{.}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index}\PY{p}{,}
                                                                \PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{o}{.}\PY{n}{groceries\PYZus{}index}\PY{p}{,}
                                                                \PY{n}{stat\PYZus{}median\PYZus{}index\PYZus{}df}\PY{o}{.}\PY{n}{restuarant\PYZus{}price\PYZus{}index}\PY{p}{)} \PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    Group Salaries by employee\_residence(country) and calculate the 25th,
median(50th) and 75 quantiles.

Reset index.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{27}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{salary\PYZus{}percentile\PYZus{}df} \PY{o}{=} \PY{n}{salary\PYZus{}df}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{o}{.}\PY{n}{agg}\PY{p}{(}
    \PY{n}{first\PYZus{}quantile} \PY{o}{=} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{percentile}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{q}\PY{o}{=}\PY{l+m+mi}{25}\PY{p}{)}\PY{p}{)}\PY{p}{,}
    \PY{n}{median} \PY{o}{=} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{percentile}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{q}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{)}\PY{p}{)}\PY{p}{,}                  
    \PY{n}{third\PYZus{}quantile} \PY{o}{=} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{percentile}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{q}\PY{o}{=}\PY{l+m+mi}{75}\PY{p}{)}\PY{p}{)}       
    \PY{p}{)}

\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
  employee\_residence  first\_quantile         median  third\_quantile
0                 AE    44951.965027   44951.965027    44951.965027
1                 AT    20062.569140   20062.569140    20062.569140
2                 AU    57804.204508   65210.900679    77777.713339
3                 CA    68329.183659   78787.568122    90223.785407
4                 CH   134427.421658  138231.717691   169114.387210
    \end{Verbatim}

    Get values from index\_dict for the countries we have salary and index
data for.

There is no cost of living data for vietnam, but there was salary so I
removed this from my data set.

Then scale each salary measure by each ``cost of'' index, then convert
values to numeric.

The largest of these values indicate were salary will go the farthest in
each catergory.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{29}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{index\PYZus{}vietnam} \PY{o}{=}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{VN}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{index\PYZus{}vietnam} \PY{p}{,} \PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}


\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{salary} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{third\PYZus{}quantile}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{index\PYZus{}dict}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{)}


\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}} 
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}     


\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{salary} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{third\PYZus{}quantile}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=}\PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{4}\PY{p}{]}
    
    
\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{salary} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}    
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{4}\PY{p}{]}
    
\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{salary} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{first\PYZus{}quantile}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}   
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}
    \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}values}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{4}\PY{p}{]}
    
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}


\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}


\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

    
    
\PY{n+nb}{print}\PY{p}{(}\PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
  employee\_residence  first\_quantile         median  third\_quantile  \textbackslash{}
0                 AE    44951.965027   44951.965027    44951.965027
1                 AT    20062.569140   20062.569140    20062.569140
2                 AU    57804.204508   65210.900679    77777.713339
3                 CA    68329.183659   78787.568122    90223.785407
4                 CH   134427.421658  138231.717691   169114.387210

                                      cost\_of\_values  \textbackslash{}
0            [55.235, 49.045, 53.095, 44.625, 59.03]
1                [73.55, 30.14, 52.54, 66.99, 68.46]
2  [76.67500000000001, 37.595, 58.945, 77.295, 74{\ldots}
3  [71.7, 34.955, 54.769999999999996, 69.985, 70{\ldots}
4             [123.99, 59.55, 92.74, 129.17, 127.01]

   cost\_of\_living\_scaled\_q1  rent\_index\_scaled\_q1  \textbackslash{}
0              81383.117638          91654.531608
1              27277.456342          66564.595686
2              75388.594076         153755.032606
3              95298.721979         195477.567326
4             108417.954398         225738.743339

   cost\_of\_living\_plus\_rent\_index\_scaled\_q1  groceries\_index\_scaled\_q1  \textbackslash{}
0                              84663.273429              100732.694739
1                              38185.323829               29948.602985
2                              98064.644174               74783.885773
3                             124756.588751               97634.041093
4                             144950.853632              104070.156893

   restuarant\_price\_index\_q1  cost\_of\_living\_scaled\_median  \textbackslash{}
0               76151.050359                  81383.117638
1               29305.534823                  27277.456342
2               77955.771420                  85048.452141
3               96585.177269                 109885.032249
4              105840.029650                 111486.182508

   rent\_index\_scaled\_median  cost\_of\_living\_plus\_rent\_index\_scaled\_median  \textbackslash{}
0              91654.531608                                  84663.273429
1              66564.595686                                  38185.323829
2             173456.312485                                 110630.080039
3             225397.133807                                 143851.685452
4             232127.149775                                 149052.962790

   groceries\_index\_scaled\_median  restuarant\_price\_index\_median  \textbackslash{}
0                  100732.694739                   76151.050359
1                   29948.602985                   29305.534823
2                   84366.260015                   87944.572729
3                  112577.792559                  111368.390872
4                  107015.342333                  108835.302489

   cost\_of\_living\_scaled\_q3  rent\_index\_scaled\_q3  \textbackslash{}
0              81383.117638          91654.531608
1              27277.456342          66564.595686
2             101438.165425         206883.131638
3             125835.126091         258114.105013
4             136393.569812         283987.216138

   cost\_of\_living\_plus\_rent\_index\_scaled\_q3  groceries\_index\_scaled\_q3  \textbackslash{}
0                              84663.273429              100732.694739
1                              38185.323829               29948.602985
2                             131949.636677              100624.507846
3                             164732.125995              128918.747456
4                             182353.231842              130923.888836

   restuarant\_price\_index\_q3
0               76151.050359
1               29305.534823
2              104892.398300
3              127533.798017
4              133150.450524
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:8:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['cost\_of\_values'][idx] =
index\_dict.get(salary\_percentile\_df['employee\_residence'][idx])
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:29:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['cost\_of\_living\_scaled\_q3'][idx]
=salary*100/salary\_percentile\_df['cost\_of\_values'][idx][0]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:30:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['rent\_index\_scaled\_q3'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][1]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:31:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['cost\_of\_living\_plus\_rent\_index\_scaled\_q3'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][2]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:32:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['groceries\_index\_scaled\_q3'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][3]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:33:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['restuarant\_price\_index\_q3'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][4]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:37:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['cost\_of\_living\_scaled\_median'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][0]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:38:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['rent\_index\_scaled\_median'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][1]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:39:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['cost\_of\_living\_plus\_rent\_index\_scaled\_median'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][2]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:40:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['groceries\_index\_scaled\_median'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][3]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:41:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['restuarant\_price\_index\_median'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][4]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:44:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['cost\_of\_living\_scaled\_q1'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][0]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:45:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['rent\_index\_scaled\_q1'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][1]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:46:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['cost\_of\_living\_plus\_rent\_index\_scaled\_q1'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][2]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:47:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['groceries\_index\_scaled\_q1'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][3]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}773068333.py:48:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  salary\_percentile\_df['restuarant\_price\_index\_q1'][idx] =
salary*100/salary\_percentile\_df['cost\_of\_values'][idx][4]
    \end{Verbatim}

    Finding top 5 of each index for each salary measyre, which returns all
columnns. Remove all columns except the residency and the column its
actually the top 5 of.

Then a graph was created to display this and the top 5 countries were
printed.

This was done in the next three cells for the first quantile, median and
third quantile.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{30}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q1} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}  \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q1} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
    

\PY{c+c1}{\PYZsh{}merging}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q1} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q1} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{country\PYZus{}code} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n}{country\PYZus{}code\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
        \PY{k}{if} \PY{n}{country\PYZus{}code} \PY{o}{==} \PY{n}{value}\PY{p}{:}
            \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{key}
            

\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
      
\PY{c+c1}{\PYZsh{} convert to long (tidy) form}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1\PYZus{}melted} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1}\PY{o}{.}\PY{n}{melt}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{var\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index\PYZus{}q1d}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{value\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{scaled\PYZus{}salary}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{legend\PYZus{}labels} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Plus Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1\PYZus{}melted}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}



\PY{n}{sns}\PY{o}{.}\PY{n}{scatterplot}\PY{p}{(}\PY{n}{data}\PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q1\PYZus{}melted}\PY{p}{,} \PY{n}{x} \PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scaled\PYZus{}salary}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{index\PYZus{}q1d}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{legend} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}  \PY{n}{palette}\PY{o}{=}\PY{n}{sns}\PY{o}{.}\PY{n}{color\PYZus{}palette}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Set1}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Top 5 Countries using the First Quantile Salaries Scaled to each Cost Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Country}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xticks}\PY{p}{(}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Salary Scaled by Cost of Index}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper right}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
           \PY{n}{labels} \PY{o}{=} \PY{n}{legend\PYZus{}labels}\PY{p}{)}                
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}


\PY{c+c1}{\PYZsh{} print countries of top 5 using print\PYZus{}countries function}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{In terms of the first quantile the following are the lists of countries where salary goes the farthest:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q1}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living plus Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q1} \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}3418214267.py:32:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  top\_5\_merged\_q1['country'][idx] = key
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
   cost\_of\_living\_scaled\_q1  rent\_index\_scaled\_q1  \textbackslash{}
0             209145.632834         359080.170000
1             170252.640607         398681.778271
2             126291.405610         306211.530049
3             125746.033897                   NaN
4             108417.954398         225738.743339

   cost\_of\_living\_plus\_rent\_index\_scaled\_q1  groceries\_index\_scaled\_q1  \textbackslash{}
0                             263169.711370              206719.081293
1                             237415.907389              207074.757555
2                             175709.211646              160602.688041
3                             141366.341820              137619.192313
4                             144950.853632              104070.156893

   restuarant\_price\_index\_q1  \textbackslash{}
0              210439.559696
1              159340.170823
2              128986.443608
3              109652.867008
4              105840.029650

                                             country
0                          United States of America
1  United Kingdom of Great Britain and Northern I{\ldots}
2                                            Germany
3                                         Luxembourg
4                                        Switzerland
                                             country  \textbackslash{}
0                          United States of America
1  United Kingdom of Great Britain and Northern I{\ldots}
2                                            Germany
3                                         Luxembourg
4                                        Switzerland

                  index\_q1d  scaled\_salary
0  cost\_of\_living\_scaled\_q1  209145.632834
1  cost\_of\_living\_scaled\_q1  170252.640607
2  cost\_of\_living\_scaled\_q1  126291.405610
3  cost\_of\_living\_scaled\_q1  125746.033897
4  cost\_of\_living\_scaled\_q1  108417.954398
    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
In terms of the first quantile the following are the lists of countries where
salary goes the farthest:

The 5 countries in which salary goes the farthest on the Cost of Living index
are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Luxembourg
Switzerland
The 5 countries in which salary goes the farthest on the Rent index are:

United Kingdom of Great Britain and Northern Ireland
United States of America
Germany
Switzerland
Italy
The 5 countries in which salary goes the farthest on the Cost of Living plus
Rent index are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Switzerland
Luxembourg
The 5 countries in which salary goes the farthest on the Groceries index are:

United Kingdom of Great Britain and Northern Ireland
United States of America
Germany
Luxembourg
Switzerland
The 5 countries in which salary goes the farthest on the Restaurant Price index
are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Luxembourg
Switzerland
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{33}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} median }
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}median} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}  \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}median} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}median} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
    

\PY{c+c1}{\PYZsh{}merging}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}median} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}median} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}median} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{country\PYZus{}code} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n}{country\PYZus{}code\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
        \PY{k}{if} \PY{n}{country\PYZus{}code} \PY{o}{==} \PY{n}{value}\PY{p}{:}
            \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{key}
            

\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}


\PY{c+c1}{\PYZsh{} convert to long (tidy) form}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median\PYZus{}melted} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median}\PY{o}{.}\PY{n}{melt}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{var\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index\PYZus{}mediand}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{value\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{scaled\PYZus{}salary}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{legend\PYZus{}labels} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Plus Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median\PYZus{}melted}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}


\PY{n}{sns}\PY{o}{.}\PY{n}{scatterplot}\PY{p}{(}\PY{n}{data}\PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}median\PYZus{}melted}\PY{p}{,} \PY{n}{x} \PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scaled\PYZus{}salary}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{index\PYZus{}mediand}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{legend} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}  \PY{n}{palette}\PY{o}{=}\PY{n}{sns}\PY{o}{.}\PY{n}{color\PYZus{}palette}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Set1}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Top 5 Countries using the Median Salaries Scaled to each Cost Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Country}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xticks}\PY{p}{(}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Salary Scaled by Cost of Index}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper right}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
           \PY{n}{labels} \PY{o}{=} \PY{n}{legend\PYZus{}labels}\PY{p}{)}                
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}

\PY{c+c1}{\PYZsh{} print countries of top 5 using print\PYZus{}countries function}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{In terms of the median the following are the lists of countries where salary goes the farthest:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}median}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living plus Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}median} \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
   cost\_of\_living\_scaled\_median  rent\_index\_scaled\_median  \textbackslash{}
0                 273417.537730             469427.999040
1                 221754.120163             519283.146800
2                 149607.338159             362744.334840
3                 132249.734553                       NaN
4                 111486.182508             232127.149775

   cost\_of\_living\_plus\_rent\_index\_scaled\_median  \textbackslash{}
0                                 344043.590645
1                                 309234.297148
2                                 208148.664728
3                                 148677.939184
4                                 149052.962790

   groceries\_index\_scaled\_median  restuarant\_price\_index\_median  \textbackslash{}
0                  270245.290055                  275109.097300
1                  269714.939550                  207540.624695
2                  190253.173151                  152799.934354
3                  144736.983655                  115324.214254
4                            NaN                            NaN

                                             country
0                          United States of America
1  United Kingdom of Great Britain and Northern I{\ldots}
2                                            Germany
3                                         Luxembourg
4                                        Switzerland
                                             country  \textbackslash{}
0                          United States of America
1  United Kingdom of Great Britain and Northern I{\ldots}
2                                            Germany
3                                         Luxembourg
4                                        Switzerland

                  index\_mediand  scaled\_salary
0  cost\_of\_living\_scaled\_median  273417.537730
1  cost\_of\_living\_scaled\_median  221754.120163
2  cost\_of\_living\_scaled\_median  149607.338159
3  cost\_of\_living\_scaled\_median  132249.734553
4  cost\_of\_living\_scaled\_median  111486.182508
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}4077783730.py:33:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  top\_5\_merged\_median['country'][idx] = key
    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_39_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
In terms of the median the following are the lists of countries where salary
goes the farthest:

The 5 countries in which salary goes the farthest on the Cost of Living index
are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Luxembourg
Switzerland
The 5 countries in which salary goes the farthest on the Rent index are:

United Kingdom of Great Britain and Northern Ireland
United States of America
Germany
Switzerland
Canada
The 5 countries in which salary goes the farthest on the Cost of Living plus
Rent index are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Switzerland
Luxembourg
The 5 countries in which salary goes the farthest on the Groceries index are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Luxembourg
Canada
The 5 countries in which salary goes the farthest on the Restaurant Price index
are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Singapore
Luxembourg
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{34}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} third quantile }
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q3} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}  \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q3} \PY{o}{=} \PY{n}{salary\PYZus{}percentile\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
    

\PY{c+c1}{\PYZsh{}merging}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q3} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q3} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{country\PYZus{}code} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n}{country\PYZus{}code\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
        \PY{k}{if} \PY{n}{country\PYZus{}code} \PY{o}{==} \PY{n}{value}\PY{p}{:}
            \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{key}
            

\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{c+c1}{\PYZsh{} convert to long (tidy) form}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3\PYZus{}melted} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3}\PY{o}{.}\PY{n}{melt}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{var\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index\PYZus{}q3d}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{value\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{scaled\PYZus{}salary}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{legend\PYZus{}labels} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Plus Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3\PYZus{}melted}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}


\PY{n}{sns}\PY{o}{.}\PY{n}{scatterplot}\PY{p}{(}\PY{n}{data}\PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}q3\PYZus{}melted}\PY{p}{,} \PY{n}{x} \PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scaled\PYZus{}salary}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{index\PYZus{}q3d}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{legend} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}  \PY{n}{palette}\PY{o}{=}\PY{n}{sns}\PY{o}{.}\PY{n}{color\PYZus{}palette}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Set1}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Top 5 Countries using the Third Quantile Salaries Scaled to each Cost Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Country}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xticks}\PY{p}{(}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Salary Scaled by Cost of Index}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper right}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
           \PY{n}{labels} \PY{o}{=} \PY{n}{legend\PYZus{}labels}\PY{p}{)}                
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}


\PY{c+c1}{\PYZsh{} print countries of top 5 using print\PYZus{}countries function}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{In terms of the third quantile the following are the lists of contries where salary goes the farthest:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}q3}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living plus Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{p}{)}
\PY{n}{print\PYZus{}countries}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}q3} \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
   cost\_of\_living\_scaled\_q3  rent\_index\_scaled\_q3  \textbackslash{}
0             348984.263611         599167.800000
1             298713.361121         699499.130119
2             175256.461362         424934.293236
3             136393.569812         283987.216138
4             132249.734553                   NaN

   cost\_of\_living\_plus\_rent\_index\_scaled\_q3  groceries\_index\_scaled\_q3  \textbackslash{}
0                             439129.838298              344935.274917
1                             416553.325851              363318.869018
2                             243834.285581              222870.738159
3                             182353.231842              130923.888836
4                                       NaN              144736.983655

   restuarant\_price\_index\_q3  \textbackslash{}
0              351143.333858
1              279567.105794
2              178996.405664
3              133150.450524
4                        NaN

                                             country
0                          United States of America
1  United Kingdom of Great Britain and Northern I{\ldots}
2                                            Germany
3                                        Switzerland
4                                         Luxembourg
                                             country  \textbackslash{}
0                          United States of America
1  United Kingdom of Great Britain and Northern I{\ldots}
2                                            Germany
3                                        Switzerland
4                                         Luxembourg

                  index\_q3d  scaled\_salary
0  cost\_of\_living\_scaled\_q3  348984.263611
1  cost\_of\_living\_scaled\_q3  298713.361121
2  cost\_of\_living\_scaled\_q3  175256.461362
3  cost\_of\_living\_scaled\_q3  136393.569812
4  cost\_of\_living\_scaled\_q3  132249.734553
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}2430392722.py:33:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  top\_5\_merged\_q3['country'][idx] = key
    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_40_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
In terms of the third quantile the following are the lists of contries where
salary goes the farthest:

The 5 countries in which salary goes the farthest on the Cost of Living index
are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Switzerland
Luxembourg
The 5 countries in which salary goes the farthest on the Rent index are:

United Kingdom of Great Britain and Northern Ireland
United States of America
Germany
Switzerland
Canada
The 5 countries in which salary goes the farthest on the Cost of Living plus
Rent index are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Switzerland
Canada
The 5 countries in which salary goes the farthest on the Groceries index are:

United Kingdom of Great Britain and Northern Ireland
United States of America
Germany
Luxembourg
Switzerland
The 5 countries in which salary goes the farthest on the Restaurant Price index
are:

United States of America
United Kingdom of Great Britain and Northern Ireland
Germany
Singapore
Switzerland
    \end{Verbatim}

    The United States was top 1 or 2 on each index for each salary measure.
This was for the US as a whole. Now I consider just the US

    Go back to salary\_df and cost\_of\_living\_df and filter for just US

Add quantile to us salary information

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{35}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{salary\PYZus{}us\PYZus{}df} \PY{o}{=} \PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{n}{salary\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{US}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

\PY{n}{salary\PYZus{}us\PYZus{}quartile\PYZus{}df} \PY{o}{=} \PY{n}{salary\PYZus{}us\PYZus{}df}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{city}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{o}{.}\PY{n}{agg}\PY{p}{(}
    \PY{n}{first\PYZus{}quantile} \PY{o}{=} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{percentile}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{q}\PY{o}{=}\PY{l+m+mi}{25}\PY{p}{)}\PY{p}{)}\PY{p}{,}
    \PY{n}{median} \PY{o}{=} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{percentile}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{q}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{)}\PY{p}{)}\PY{p}{,}
    \PY{n}{third\PYZus{}quantile} \PY{o}{=} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{salary\PYZus{}in\PYZus{}2023}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{percentile}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{q}\PY{o}{=}\PY{l+m+mi}{75}\PY{p}{)}\PY{p}{)}       
    \PY{p}{)}

\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}df} \PY{o}{=} \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{employee\PYZus{}residence}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{US}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}


\PY{n+nb}{print}\PY{p}{(}\PY{n}{salary\PYZus{}us\PYZus{}quartile\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                    first\_quantile         median  third\_quantile
city         state
Albuquerque  NM      145902.476293  145902.476293   145902.476293
Alpharetta   GA      120121.760000  120121.760000   120121.760000
Ann Arbor    MI      200549.029750  200549.029750   200549.029750
Antioch      TN      149839.883424  149839.883424   149839.883424
Arizona City AZ      114163.720704  135569.418336   156975.115968
    Rank                              City  Cost of Living Index  Rent Index  \textbackslash{}
10   NaN       Honolulu, HI, United States                103.65       65.07
13   NaN       New York, NY, United States                100.00      100.00
18   NaN  Santa Barbara, CA, United States                 95.01       78.42
20   NaN       Berkeley, CA, United States                 94.36       88.22
21   NaN  San Francisco, CA, United States                 93.91      108.42

    Cost of Living Plus Rent Index  Groceries Index  Restaurant Price Index  \textbackslash{}
10                           85.56           114.92                   94.28
13                          100.00           100.00                  100.00
18                           87.23            99.53                   99.41
20                           91.48           106.23                   78.85
21                          100.72            97.05                   93.40

    Local Purchasing Power Index           city state        country  \textbackslash{}
10                         89.24       Honolulu    HI  United States
13                        100.00       New York    NY  United States
18                         93.86  Santa Barbara    CA  United States
20                         85.78       Berkeley    CA  United States
21                        133.16  San Francisco    CA  United States

   employee\_residence
10                 US
13                 US
18                 US
20                 US
21                 US
    \end{Verbatim}

    Note there are no duplicate cities in the cost of living index data, so
unlike when grouped by country there is no measures of central tendency
to calculate when we look at cities individually.

merge cost of living and salary data, then scale salary by each cost of
living index

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{36}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{salary\PYZus{}us\PYZus{}quartile\PYZus{}df} \PY{p}{,} 
                                             \PY{n}{cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}df}\PY{p}{,}
                                             \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{city}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{state}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}


\PY{n+nb}{print}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
           city state  first\_quantile         median  third\_quantile  Rank  \textbackslash{}
0   Albuquerque    NM   145902.476293  145902.476293   145902.476293   NaN
1    Alpharetta    GA   120121.760000  120121.760000   120121.760000   NaN
2     Ann Arbor    MI   200549.029750  200549.029750   200549.029750   NaN
3       Antioch    TN   149839.883424  149839.883424   149839.883424   NaN
4  Arizona City    AZ   114163.720704  135569.418336   156975.115968   NaN

                             City  Cost of Living Index  Rent Index  \textbackslash{}
0  Albuquerque, NM, United States                 63.44       33.91
1                             NaN                   NaN         NaN
2    Ann Arbor, MI, United States                 70.28       47.97
3                             NaN                   NaN         NaN
4                             NaN                   NaN         NaN

   Cost of Living Plus Rent Index  Groceries Index  Restaurant Price Index  \textbackslash{}
0                           49.60            64.60                   64.07
1                             NaN              NaN                     NaN
2                           59.82            74.16                   63.62
3                             NaN              NaN                     NaN
4                             NaN              NaN                     NaN

   Local Purchasing Power Index        country employee\_residence
0                        122.44  United States                 US
1                           NaN            NaN                NaN
2                        159.99  United States                 US
3                           NaN            NaN                NaN
4                           NaN            NaN                NaN
    \end{Verbatim}

    remove the rank column which is all nan

drops rows that contain nan as they either are missing salary or index
data

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{37}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}df}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rank}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{)}

\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{dropna}\PY{p}{(}\PY{n}{axis} \PY{o}{=} \PY{l+m+mi}{0}\PY{p}{)}

\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{drop}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}


\PY{n+nb}{print}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
          city state  first\_quantile         median  third\_quantile  \textbackslash{}
0  Albuquerque    NM   145902.476293  145902.476293   145902.476293
1    Ann Arbor    MI   200549.029750  200549.029750   200549.029750
2      Atlanta    GA   122488.158672  141962.080000   154596.705120
3       Austin    TX   126871.718516  146330.144000   175774.171408
4     Berkeley    CA   319166.443687  338732.202687   358297.961687

                             City  Cost of Living Index  Rent Index  \textbackslash{}
0  Albuquerque, NM, United States                 63.44       33.91
1    Ann Arbor, MI, United States                 70.28       47.97
2      Atlanta, GA, United States                 76.60       48.58
3       Austin, TX, United States                 66.50       57.68
4     Berkeley, CA, United States                 94.36       88.22

   Cost of Living Plus Rent Index  Groceries Index  Restaurant Price Index  \textbackslash{}
0                           49.60            64.60                   64.07
1                           59.82            74.16                   63.62
2                           63.47            78.00                   70.94
3                           62.36            67.33                   73.74
4                           91.48           106.23                   78.85

   Local Purchasing Power Index        country employee\_residence
0                        122.44  United States                 US
1                        159.99  United States                 US
2                        130.67  United States                 US
3                        158.21  United States                 US
4                         85.78  United States                 US
    \end{Verbatim}

    Calculate scaled salaries for each index and convert to numeric

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{40}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}  

\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}} 


\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}} 

\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{salary} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{first\PYZus{}quantile}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Plus Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}


\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{salary} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Plus Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}


\PY{k}{for} \PY{n}{idx}\PY{p}{,} \PY{n}{salary} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{third\PYZus{}quantile}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Plus Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}
    \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]} \PY{o}{=} \PY{n}{salary}\PY{o}{*}\PY{l+m+mi}{100}\PY{o}{/}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{n}{idx}\PY{p}{]}

\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    

\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    


\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{errors}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coerce}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    


\PY{n+nb}{print}\PY{p}{(}\PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
          city state  first\_quantile         median  third\_quantile  \textbackslash{}
0  Albuquerque    NM   145902.476293  145902.476293   145902.476293
1    Ann Arbor    MI   200549.029750  200549.029750   200549.029750
2      Atlanta    GA   122488.158672  141962.080000   154596.705120
3       Austin    TX   126871.718516  146330.144000   175774.171408
4     Berkeley    CA   319166.443687  338732.202687   358297.961687

                             City  Cost of Living Index  Rent Index  \textbackslash{}
0  Albuquerque, NM, United States                 63.44       33.91
1    Ann Arbor, MI, United States                 70.28       47.97
2      Atlanta, GA, United States                 76.60       48.58
3       Austin, TX, United States                 66.50       57.68
4     Berkeley, CA, United States                 94.36       88.22

   Cost of Living Plus Rent Index  Groceries Index  {\ldots}  \textbackslash{}
0                           49.60            64.60  {\ldots}
1                           59.82            74.16  {\ldots}
2                           63.47            78.00  {\ldots}
3                           62.36            67.33  {\ldots}
4                           91.48           106.23  {\ldots}

   cost\_of\_living\_scaled\_median  rent\_index\_scaled\_median  \textbackslash{}
0                 229984.987851             430263.864031
1                 285357.185188             418071.773504
2                 185329.086162             292223.301770
3                 220045.329323             253693.037448
4                 358978.595472             383963.049974

  cost\_of\_living\_plus\_rent\_index\_scaled\_median groceries\_index\_scaled\_median  \textbackslash{}
0                                294158.218332                 225855.226460
1                                335254.145353                 270427.494269
2                                223668.000630                 182002.666667
3                                234653.855035                 217332.755087
4                                370280.064153                 318866.800986

   restuarant\_price\_index\_median  cost\_of\_living\_scaled\_q3  \textbackslash{}
0                  227723.546579             229984.987851
1                  315229.534344             285357.185188
2                  200115.703411             201823.374830
3                  198440.661785             264322.062268
4                  429590.618500             379713.821203

   rent\_index\_scaled\_q3  cost\_of\_living\_plus\_rent\_index\_scaled\_q3  \textbackslash{}
0         430263.864031                             294158.218332
1         418071.773504                             335254.145353
2         318231.175628                             243574.452686
3         304740.241692                             281870.063194
4         406141.421092                             391668.082299

   groceries\_index\_scaled\_q3  restuarant\_price\_index\_q3
0              225855.226460              227723.546579
1              270427.494269              315229.534344
2              198200.904000              217926.001015
3              261063.673560              238370.180917
4              337285.099960              454404.517042

[5 rows x 29 columns]
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:21:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['cost\_of\_living\_scaled\_q1'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Cost of Living Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:22:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['rent\_index\_scaled\_q1'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Rent Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:23:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['cost\_of\_living\_plus\_rent\_index\_scaled\_
q1'][idx] = salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Cost of Living
Plus Rent Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:24:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['groceries\_index\_scaled\_q1'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Groceries Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:25:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['restuarant\_price\_index\_q1'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Restaurant Price Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:29:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['cost\_of\_living\_scaled\_median'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Cost of Living Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:30:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['rent\_index\_scaled\_median'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Rent Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:31:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['cost\_of\_living\_plus\_rent\_index\_scaled\_
median'][idx] = salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Cost of
Living Plus Rent Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:32:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['groceries\_index\_scaled\_median'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Groceries Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:33:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['restuarant\_price\_index\_median'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Restaurant Price Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:37:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['cost\_of\_living\_scaled\_q3'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Cost of Living Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:38:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['rent\_index\_scaled\_q3'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Rent Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:39:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['cost\_of\_living\_plus\_rent\_index\_scaled\_
q3'][idx] = salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Cost of Living
Plus Rent Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:40:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['groceries\_index\_scaled\_q3'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Groceries Index'][idx]
C:\textbackslash{}Users\textbackslash{}hawthorner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Temp\textbackslash{}ipykernel\_22188\textbackslash{}94921046.py:41:
SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-
docs/stable/user\_guide/indexing.html\#returning-a-view-versus-a-copy
  us\_salary\_cost\_of\_living\_merge\_drop\_df['restuarant\_price\_index\_q3'][idx] =
salary*100/us\_salary\_cost\_of\_living\_merge\_drop\_df['Restaurant Price Index'][idx]
    \end{Verbatim}

    finding top 5 of each indice, which returns all columnns. so I removed
all columns except the residency and the column its actually the top 5
of.

Then created a graphic and printed the top 5 for each index.

This was repeated with each of the first quantile, median, and third
quantile.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{47}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} first quantile}

\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1}  \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q1}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
    


\PY{c+c1}{\PYZsh{}merging}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q1} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q1} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q1} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q1} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q1} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}

\PY{c+c1}{\PYZsh{} convert to long (tidy) form}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}melted\PYZus{}us\PYZus{}q1} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q1}\PY{o}{.}\PY{n}{melt}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{var\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index\PYZus{}measured}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{value\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{scaled\PYZus{}salary}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}melted\PYZus{}us\PYZus{}q1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n}{legend\PYZus{}labels} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living Plus Rent Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}

\PY{n}{ax} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{scatterplot}\PY{p}{(}\PY{n}{data}\PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}melted\PYZus{}us\PYZus{}q1}\PY{p}{,} \PY{n}{x} \PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scaled\PYZus{}salary}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{index\PYZus{}measured}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{palette}\PY{o}{=}\PY{n}{sns}\PY{o}{.}\PY{n}{color\PYZus{}palette}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Set1}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Top 5 US Cities with First Quantile Salaries Scaled to each Cost Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{City}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xticks}\PY{p}{(}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Salary Scaled by Cost of Index}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
           \PY{n}{labels} \PY{o}{=} \PY{n}{legend\PYZus{}labels}\PY{p}{)}
\PY{n}{sns}\PY{o}{.}\PY{n}{move\PYZus{}legend}\PY{p}{(}\PY{n}{ax}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{upper left}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{bbox\PYZus{}to\PYZus{}anchor}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}                

\PY{c+c1}{\PYZsh{} print countries of top 5 using print\PYZus{}countries function}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{The top five cities for each index for the first quantile of salaries are:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q1}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living plus Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q1}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q1} \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                            City  cost\_of\_living\_scaled\_q1  \textbackslash{}
0    Berkeley, CA, United States             338243.369741
1     Fremont, CA, United States             292997.866728
2   Ann Arbor, MI, United States             285357.185188
3  Sacramento, CA, United States             259585.159322
4    San Jose, CA, United States             248053.634432

   rent\_index\_scaled\_q1  cost\_of\_living\_plus\_rent\_index\_scaled\_q1  \textbackslash{}
0                   NaN                             348892.046007
1                   NaN                             291503.380965
2         418071.773504                             335254.145353
3         399930.607478                             310688.369571
4                   NaN                                       NaN

   groceries\_index\_scaled\_q1  restuarant\_price\_index\_q1
0              300448.502012              404776.719959
1              288023.897638              305873.265942
2              270427.494269              315229.534344
3              250080.309352              287861.201880
4              259237.677499              246249.608000
                            City            index\_measured  scaled\_salary
0    Berkeley, CA, United States  cost\_of\_living\_scaled\_q1  338243.369741
1     Fremont, CA, United States  cost\_of\_living\_scaled\_q1  292997.866728
2   Ann Arbor, MI, United States  cost\_of\_living\_scaled\_q1  285357.185188
3  Sacramento, CA, United States  cost\_of\_living\_scaled\_q1  259585.159322
4    San Jose, CA, United States  cost\_of\_living\_scaled\_q1  248053.634432
    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_51_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
The top five cities for each index for the first quantile of salaries are:

The 5 cities in which salary goes the farthest on the Cost of Living index are:
Berkeley, CA, United States
Fremont, CA, United States
Ann Arbor, MI, United States
Sacramento, CA, United States
San Jose, CA, United States
The 5 cities in which salary goes the farthest on the Rent index are:
Albuquerque, NM, United States
Ann Arbor, MI, United States
Columbus, OH, United States
Sacramento, CA, United States
Detroit, MI, United States
The 5 cities in which salary goes the farthest on the Cost of Living plus Rent
index are:
Berkeley, CA, United States
Ann Arbor, MI, United States
Sacramento, CA, United States
Albuquerque, NM, United States
Fremont, CA, United States
The 5 cities in which salary goes the farthest on the Groceries index are:
Berkeley, CA, United States
Fremont, CA, United States
Ann Arbor, MI, United States
San Jose, CA, United States
Sacramento, CA, United States
The 5 cities in which salary goes the farthest on the Restaurant Price index
are:
Berkeley, CA, United States
Ann Arbor, MI, United States
Fremont, CA, United States
Sacramento, CA, United States
San Jose, CA, United States
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{48}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median}  \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}median}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
    


\PY{c+c1}{\PYZsh{}merging}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}median} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}median} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}median} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}median} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}median} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}median}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}


\PY{c+c1}{\PYZsh{} convert to long (tidy) form}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}melted\PYZus{}us\PYZus{}median} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}median}\PY{o}{.}\PY{n}{melt}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{var\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index\PYZus{}measured}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{value\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{scaled\PYZus{}salary}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}melted\PYZus{}us\PYZus{}median}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}


\PY{n}{ax} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{scatterplot}\PY{p}{(}\PY{n}{data}\PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}melted\PYZus{}us\PYZus{}median}\PY{p}{,} \PY{n}{x} \PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scaled\PYZus{}salary}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{index\PYZus{}measured}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{palette}\PY{o}{=}\PY{n}{sns}\PY{o}{.}\PY{n}{color\PYZus{}palette}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Set1}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Top 5 US Cities with Median Salaries Scaled to each Cost Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{City}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xticks}\PY{p}{(}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Salary Scaled by Cost of Index}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
           \PY{n}{labels} \PY{o}{=} \PY{n}{legend\PYZus{}labels}\PY{p}{)}  
\PY{n}{sns}\PY{o}{.}\PY{n}{move\PYZus{}legend}\PY{p}{(}\PY{n}{ax}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{upper left}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{bbox\PYZus{}to\PYZus{}anchor}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}                

\PY{c+c1}{\PYZsh{} print countries of top 5 using print\PYZus{}countries function}


\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}median}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living plus Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}median}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}median} \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                           City  cost\_of\_living\_scaled\_median  \textbackslash{}
0   Berkeley, CA, United States                 358978.595472
1    Fremont, CA, United States                 305220.032970
2   San Jose, CA, United States                 288842.009833
3  Ann Arbor, MI, United States                 285357.185188
4  San Diego, CA, United States                 264723.083652

   rent\_index\_scaled\_median  cost\_of\_living\_plus\_rent\_index\_scaled\_median  \textbackslash{}
0                       NaN                                 370280.064153
1                       NaN                                 303663.205956
2                       NaN                                           NaN
3             418071.773504                                 335254.145353
4                       NaN                                           NaN

   groceries\_index\_scaled\_median  restuarant\_price\_index\_median
0                  318866.800986                  429590.618500
1                  300038.578829                  318632.518926
2                  301865.086414                  286741.340671
3                            NaN                  315229.534344
4                  270640.085657                            NaN
                           City                index\_measured  scaled\_salary
0   Berkeley, CA, United States  cost\_of\_living\_scaled\_median  358978.595472
1    Fremont, CA, United States  cost\_of\_living\_scaled\_median  305220.032970
2   San Jose, CA, United States  cost\_of\_living\_scaled\_median  288842.009833
3  Ann Arbor, MI, United States  cost\_of\_living\_scaled\_median  285357.185188
4  San Diego, CA, United States  cost\_of\_living\_scaled\_median  264723.083652
    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_52_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
The 5 cities in which salary goes the farthest on the Cost of Living index are:
Berkeley, CA, United States
Fremont, CA, United States
San Jose, CA, United States
Ann Arbor, MI, United States
San Diego, CA, United States
The 5 cities in which salary goes the farthest on the Rent index are:
Albuquerque, NM, United States
Ann Arbor, MI, United States
Columbus, OH, United States
Sacramento, CA, United States
Richmond, VA, United States
The 5 cities in which salary goes the farthest on the Cost of Living plus Rent
index are:
Berkeley, CA, United States
Ann Arbor, MI, United States
Sacramento, CA, United States
Fremont, CA, United States
Albuquerque, NM, United States
The 5 cities in which salary goes the farthest on the Groceries index are:
Berkeley, CA, United States
San Jose, CA, United States
Fremont, CA, United States
Los Angeles, CA, United States
San Diego, CA, United States
The 5 cities in which salary goes the farthest on the Restaurant Price index
are:
Berkeley, CA, United States
Fremont, CA, United States
Ann Arbor, MI, United States
Sacramento, CA, United States
San Jose, CA, United States
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{49}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}third qunatile}
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
\PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3}  \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{groceries\PYZus{}index\PYZus{}scaled\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}


\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{us\PYZus{}salary\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}merge\PYZus{}drop\PYZus{}df}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q3}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{restuarant\PYZus{}price\PYZus{}index\PYZus{}q3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
    


\PY{c+c1}{\PYZsh{}merging}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q3} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q3} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q3} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q3} \PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q3} \PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q3}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}

\PY{c+c1}{\PYZsh{} convert to long (tidy) form}
\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}melted\PYZus{}us\PYZus{}q3} \PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}us\PYZus{}q3}\PY{o}{.}\PY{n}{melt}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{var\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index\PYZus{}measured}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{value\PYZus{}name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{scaled\PYZus{}salary}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}melted\PYZus{}us\PYZus{}q3}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}


\PY{n}{ax} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{scatterplot}\PY{p}{(}\PY{n}{data}\PY{o}{=} \PY{n}{top\PYZus{}5\PYZus{}merged\PYZus{}melted\PYZus{}us\PYZus{}q3}\PY{p}{,} \PY{n}{x} \PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{City}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scaled\PYZus{}salary}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{index\PYZus{}measured}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{palette}\PY{o}{=}\PY{n}{sns}\PY{o}{.}\PY{n}{color\PYZus{}palette}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Set1}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Top 5 US Cities with Third Quantile Salaries Scaled to each Cost Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{City}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xticks}\PY{p}{(}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Salary Scaled by Cost of Index}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
           \PY{n}{labels} \PY{o}{=} \PY{n}{legend\PYZus{}labels}\PY{p}{)}    
\PY{n}{sns}\PY{o}{.}\PY{n}{move\PYZus{}legend}\PY{p}{(}\PY{n}{ax}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{upper left}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{bbox\PYZus{}to\PYZus{}anchor}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}            
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}                

\PY{c+c1}{\PYZsh{} print countries of top 5 using print\PYZus{}countries function}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{The top five cities for each index for the third quantile of salaries are:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}us\PYZus{}q3}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cost of Living plus Rent}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}cost\PYZus{}of\PYZus{}living\PYZus{}plus\PYZus{}rent\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Groceries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}groceries\PYZus{}index\PYZus{}scaled\PYZus{}us\PYZus{}q3}\PY{p}{)}
\PY{n}{print\PYZus{}cities}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Restaurant Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}5\PYZus{}restuarant\PYZus{}price\PYZus{}index\PYZus{}us\PYZus{}q3} \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                               City  cost\_of\_living\_scaled\_q3  \textbackslash{}
0       Berkeley, CA, United States             379713.821203
1    Los Angeles, CA, United States             330376.554211
2        Fremont, CA, United States             321075.436776
3       San Jose, CA, United States             318557.978374
4  San Francisco, CA, United States             317483.269632

   rent\_index\_scaled\_q3  cost\_of\_living\_plus\_rent\_index\_scaled\_q3  \textbackslash{}
0                   NaN                             391668.082299
1                   NaN                             339861.253936
2                   NaN                                       NaN
3                   NaN                                       NaN
4                   NaN                                       NaN

   groceries\_index\_scaled\_q3  restuarant\_price\_index\_q3
0              337285.099960              454404.517042
1              344515.661417                        NaN
2              315624.819282              335184.667238
3              332920.864681              316241.193076
4              307211.271006              319216.850655
                               City            index\_measured  scaled\_salary
0       Berkeley, CA, United States  cost\_of\_living\_scaled\_q3  379713.821203
1    Los Angeles, CA, United States  cost\_of\_living\_scaled\_q3  330376.554211
2        Fremont, CA, United States  cost\_of\_living\_scaled\_q3  321075.436776
3       San Jose, CA, United States  cost\_of\_living\_scaled\_q3  318557.978374
4  San Francisco, CA, United States  cost\_of\_living\_scaled\_q3  317483.269632
    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_53_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
The top five cities for each index for the third quantile of salaries are:

The 5 cities in which salary goes the farthest on the Cost of Living index are:
Berkeley, CA, United States
Los Angeles, CA, United States
Fremont, CA, United States
San Jose, CA, United States
San Francisco, CA, United States
The 5 cities in which salary goes the farthest on the Rent index are:
Pittsburgh, PA, United States
Detroit, MI, United States
Albuquerque, NM, United States
Columbus, OH, United States
Ann Arbor, MI, United States
The 5 cities in which salary goes the farthest on the Cost of Living plus Rent
index are:
Berkeley, CA, United States
Los Angeles, CA, United States
Ann Arbor, MI, United States
Seattle, WA, United States
Houston, TX, United States
The 5 cities in which salary goes the farthest on the Groceries index are:
Los Angeles, CA, United States
Berkeley, CA, United States
San Jose, CA, United States
Fremont, CA, United States
San Francisco, CA, United States
The 5 cities in which salary goes the farthest on the Restaurant Price index
are:
Berkeley, CA, United States
Fremont, CA, United States
Santa Clara, CA, United States
San Francisco, CA, United States
San Jose, CA, United States
    \end{Verbatim}

    What I have learned is that I am not moving anywhere where my salary
will go the farthest as I have zero intention of leaving coastal New
Hampshire to live in California, the midwest or Texas. (Actually it
seems New England was sorely underrepresented in the data, so perhaps
more extemsive data would show NH actually is the best.)


    % Add a bibliography block to the postdoc
    
    
    
\end{document}
